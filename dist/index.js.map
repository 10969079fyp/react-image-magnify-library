{"version":3,"file":"index.js","sources":["../node_modules/react/cjs/react-jsx-runtime.production.js","../node_modules/react/cjs/react-jsx-runtime.development.js","../node_modules/react/jsx-runtime.js","../src/ReactImageMagnifyUtils.ts","../src/ReactImageMagnifyEventHandlers.ts","../src/ReactImageMagnifyAICaption.tsx","../src/ReactImageMagnifyDisplay.tsx","../src/ReactImageMagnify.tsx","../src/ReactImageMagnifier.tsx","../src/ReactImageMagnifyAITest.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return (type.displayName || \"Context\") + \".Provider\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(\n      type,\n      key,\n      self,\n      source,\n      owner,\n      props,\n      debugStack,\n      debugTask\n    ) {\n      self = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== self ? self : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        self,\n        source,\n        getOwner(),\n        maybeKey,\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      \"object\" === typeof node &&\n        null !== node &&\n        node.$$typeof === REACT_ELEMENT_TYPE &&\n        node._store &&\n        (node._store.validated = 1);\n    }\n    var React = require(\"react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\n    Symbol.for(\"react.provider\");\n    var REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      \"react-stack-bottom-frame\": function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React[\"react-stack-bottom-frame\"].bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsx = function (type, config, maybeKey, source, self) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !1,\n        source,\n        self,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n    exports.jsxs = function (type, config, maybeKey, source, self) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !0,\n        source,\n        self,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","export type MagnifierShape = 'circle' | 'rounded-rectangle';\r\n\r\nexport function getTouchDistance(touches: React.TouchList): number {\r\n  const [touch1, touch2] = [touches[0], touches[1]];\r\n  const dx = touch2.clientX - touch1.clientX;\r\n  const dy = touch2.clientY - touch1.clientY;\r\n  return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\nexport function getBorderRadius(shape: MagnifierShape): string {\r\n  switch (shape) {\r\n    case 'circle':\r\n      return '50%';\r\n    case 'rounded-rectangle':\r\n      return '15px';\r\n    default:\r\n      return '50%';\r\n  }\r\n}\r\n","import React, { MouseEvent, WheelEvent, TouchEvent, RefObject } from 'react';\r\nimport { MagnifierShape, getTouchDistance } from './ReactImageMagnifyUtils';\r\n\r\ninterface EventHandlerParams {\r\n  imgRef: RefObject<HTMLImageElement | null>;\r\n  containerRef: RefObject<HTMLDivElement | null>;\r\n  setShowMagnifier: React.Dispatch<React.SetStateAction<boolean>>;\r\n  setMagnifierX: React.Dispatch<React.SetStateAction<number>>;\r\n  setMagnifierY: React.Dispatch<React.SetStateAction<number>>;\r\n  setZoomLevel: React.Dispatch<React.SetStateAction<number>>;\r\n  setZoomMode: React.Dispatch<React.SetStateAction<boolean>>;\r\n  setMagnifierShape: React.Dispatch<React.SetStateAction<MagnifierShape>>;\r\n  zoomMode: boolean;\r\n  initialZoomLevel: number;\r\n  magnifierShape: MagnifierShape;\r\n  isFullScreen: boolean;\r\n  lastTouchDistance: React.MutableRefObject<number | null>;\r\n  lastRightClickTime: React.MutableRefObject<number>;\r\n  lastTap: React.MutableRefObject<number>;\r\n  toggleFullScreen: () => void;\r\n}\r\n\r\nexport function handleContextMenu(e: MouseEvent<HTMLDivElement>, setMagnifierShape: React.Dispatch<React.SetStateAction<MagnifierShape>>) {\r\n  e.preventDefault();\r\n  setMagnifierShape((prev) => {\r\n    if (prev === 'circle') return 'rounded-rectangle';\r\n    return 'circle';\r\n  });\r\n}\r\n\r\nexport function handleRightClick(e: MouseEvent<HTMLDivElement>, imgRef: RefObject<HTMLImageElement | null>, lastRightClickTime: React.MutableRefObject<number>, toggleFullScreen: () => void) {\r\n  if (e.button !== 2) return; // Only right click\r\n  e.preventDefault();\r\n  if (e.target !== imgRef.current) {\r\n    return;\r\n  }\r\n  const now = Date.now();\r\n  if (now - lastRightClickTime.current < 300) {\r\n    // Double right click detected on image\r\n    toggleFullScreen();\r\n  }\r\n  lastRightClickTime.current = now;\r\n}\r\n\r\nexport function handleMouseMove(e: MouseEvent<HTMLDivElement>, params: EventHandlerParams) {\r\n  const { imgRef, isFullScreen, zoomMode, setShowMagnifier, setMagnifierX, setMagnifierY } = params;\r\n  if (!imgRef.current || isFullScreen) return;\r\n\r\n  const { top, left, width, height } = imgRef.current.getBoundingClientRect();\r\n\r\n  const x = e.clientX - left;\r\n  const y = e.clientY - top;\r\n\r\n  if (x < 0 || y < 0 || x > width || y > height) {\r\n    if (!zoomMode) {\r\n      setShowMagnifier(false);\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (!zoomMode) {\r\n    setShowMagnifier(true);\r\n  }\r\n\r\n  setMagnifierX(x);\r\n  setMagnifierY(y);\r\n}\r\n\r\nexport function handleMouseLeave(params: EventHandlerParams) {\r\n  const { zoomMode, setShowMagnifier, isFullScreen } = params;\r\n  if (!zoomMode && !isFullScreen) {\r\n    setShowMagnifier(false);\r\n  }\r\n}\r\n\r\nexport function handleDoubleClick(e: MouseEvent<HTMLDivElement>, params: EventHandlerParams) {\r\n  const { imgRef, initialZoomLevel, setZoomMode, setShowMagnifier, setZoomLevel } = params;\r\n  if (params.isFullScreen) return;\r\n  if (e.button !== 0) return; // Only left click double click\r\n  e.preventDefault();\r\n  setZoomMode((prev) => {\r\n    const newZoomMode = !prev;\r\n    if (!newZoomMode) {\r\n      setShowMagnifier(false);\r\n      setZoomLevel(initialZoomLevel);\r\n    } else {\r\n      if (imgRef.current) {\r\n        const { top, left } = imgRef.current.getBoundingClientRect();\r\n        const x = e.clientX - left;\r\n        const y = e.clientY - top;\r\n        params.setMagnifierX(x);\r\n        params.setMagnifierY(y);\r\n        setShowMagnifier(true);\r\n      }\r\n    }\r\n    return newZoomMode;\r\n  });\r\n}\r\n\r\nexport function handleWheel(e: WheelEvent<HTMLDivElement>, params: EventHandlerParams) {\r\n  const { zoomMode, isFullScreen, setZoomLevel } = params;\r\n  if (!zoomMode || isFullScreen) return;\r\n\r\n  e.preventDefault();\r\n  const delta = -e.deltaY || e.detail || (e as any).wheelDelta;\r\n  setZoomLevel((prev) => {\r\n    let newZoom = prev + (delta > 0 ? 0.1 : -0.1);\r\n    if (newZoom < 1) newZoom = 1;\r\n    if (newZoom > 5) newZoom = 5;\r\n    return newZoom;\r\n  });\r\n}\r\n\r\nexport function handleTouchStart(e: TouchEvent<HTMLDivElement>, lastTouchDistance: React.MutableRefObject<number | null>) {\r\n  if (e.touches.length === 2) {\r\n    const dist = getTouchDistance(e.touches);\r\n    lastTouchDistance.current = dist;\r\n  }\r\n}\r\n\r\nexport function handleTouchMove(e: TouchEvent<HTMLDivElement>, params: EventHandlerParams) {\r\n  if (e.touches.length === 2 && params.lastTouchDistance.current !== null) {\r\n    const dist = getTouchDistance(e.touches);\r\n    const delta = dist - params.lastTouchDistance.current;\r\n    if (Math.abs(delta) > 5) { // threshold to avoid noise\r\n      params.setZoomLevel((prev) => {\r\n        let newZoom = prev + (delta > 0 ? 0.1 : -0.1);\r\n        if (newZoom < 1) newZoom = 1;\r\n        if (newZoom > 5) newZoom = 5;\r\n        return newZoom;\r\n      });\r\n      params.lastTouchDistance.current = dist;\r\n    }\r\n    e.preventDefault();\r\n  }\r\n}\r\n\r\nexport function handleTouchEnd(e: TouchEvent<HTMLDivElement>, lastTouchDistance: React.MutableRefObject<number | null>) {\r\n  if (e.touches.length < 2) {\r\n    lastTouchDistance.current = null;\r\n  }\r\n}\r\n\r\nexport function handleTouchTap(e: TouchEvent<HTMLDivElement>, params: EventHandlerParams) {\r\n  if (params.isFullScreen) return;\r\n  const now = Date.now();\r\n  if (now - params.lastTap.current < 300) {\r\n    // double tap ignored, only single tap toggles zoom mode\r\n    return;\r\n  }\r\n  params.lastTap.current = now;\r\n  params.setZoomMode((prev) => {\r\n    const newZoomMode = !prev;\r\n    if (!newZoomMode) {\r\n      params.setShowMagnifier(false);\r\n      params.setZoomLevel(params.initialZoomLevel);\r\n    } else {\r\n      if (params.imgRef.current) {\r\n        const rect = params.imgRef.current.getBoundingClientRect();\r\n        const x = e.touches[0].clientX - rect.left;\r\n        const y = e.touches[0].clientY - rect.top;\r\n        params.setMagnifierX(x);\r\n        params.setMagnifierY(y);\r\n        params.setShowMagnifier(true);\r\n      }\r\n    }\r\n    return newZoomMode;\r\n  });\r\n}\r\n","import React, { useEffect, useState, CSSProperties } from 'react';\r\n\r\ninterface ReactImageMagnifyAICaptionProps {\r\n  imgRef: React.RefObject<HTMLImageElement | null>;\r\n  magnifierX: number;\r\n  magnifierY: number;\r\n  magnifierWidth: number;\r\n  magnifierHeight: number;\r\n  zoomLevel: number;\r\n  captionModelUrl?: string;\r\n  huggingFaceToken?: string;\r\n  style?: CSSProperties;\r\n  showCaptions?: boolean;\r\n}\r\n\r\nconst ReactImageMagnifyAICaption: React.FC<ReactImageMagnifyAICaptionProps> = ({\r\n  imgRef,\r\n  magnifierX,\r\n  magnifierY,\r\n  magnifierWidth,\r\n  magnifierHeight,\r\n  zoomLevel,\r\n  captionModelUrl,\r\n  huggingFaceToken,\r\n  style,\r\n  showCaptions = true,\r\n}) => {\r\n  const [caption, setCaption] = useState<string>('Loading caption...');\r\n\r\n  // Function to extract cropped image portion as base64\r\n  const getCroppedImageBase64 = (): string | null => {\r\n    if (!imgRef.current) return null;\r\n\r\n    const img = imgRef.current;\r\n    const naturalWidth = img.naturalWidth;\r\n    const naturalHeight = img.naturalHeight;\r\n    const displayedWidth = img.width;\r\n    const displayedHeight = img.height;\r\n\r\n    // Calculate scale between natural and displayed image\r\n    const scaleX = naturalWidth / displayedWidth;\r\n    const scaleY = naturalHeight / displayedHeight;\r\n\r\n    // Calculate the actual size of the magnified area in the natural image\r\n    const magnifiedWidth = magnifierWidth / zoomLevel;\r\n    const magnifiedHeight = magnifierHeight / zoomLevel;\r\n\r\n    // Calculate crop area in natural image coordinates (centered on magnifier position)\r\n    const cropX = Math.max(0, (magnifierX * scaleX) - (magnifiedWidth * scaleX) / 2);\r\n    const cropY = Math.max(0, (magnifierY * scaleY) - (magnifiedHeight * scaleY) / 2);\r\n    const cropWidth = Math.min(magnifiedWidth * scaleX, naturalWidth - cropX);\r\n    const cropHeight = Math.min(magnifiedHeight * scaleY, naturalHeight - cropY);\r\n\r\n    // Create canvas to draw cropped image\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = magnifiedWidth;\r\n    canvas.height = magnifiedHeight;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return null;\r\n\r\n    // Draw the cropped portion, scaling it to fit the canvas\r\n    ctx.drawImage(\r\n      img,\r\n      cropX,\r\n      cropY,\r\n      cropWidth,\r\n      cropHeight,\r\n      0,\r\n      0,\r\n      magnifiedWidth,\r\n      magnifiedHeight\r\n    );\r\n\r\n    // Get base64 data URL\r\n    return canvas.toDataURL('image/jpeg');\r\n  };\r\n\r\n  // Function to simulate or call AI caption API\r\n  const fetchCaption = async (imageBase64: string) => {\r\n    if (!captionModelUrl) {\r\n      // Placeholder: simulate caption generation with a timeout\r\n      setCaption('Describing image...');\r\n      await new Promise((resolve) => setTimeout(resolve, 1000));\r\n      setCaption('AI caption: A zoomed-in view of the image.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Check if we have a valid base64 image\r\n      if (!imageBase64 || !imageBase64.startsWith('data:image')) {\r\n        setCaption('Unable to process image data');\r\n        return;\r\n      }\r\n\r\n      const headers: Record<string, string> = {\r\n        'Content-Type': 'application/json',\r\n      };\r\n      \r\n      // Add authorization header if token is provided\r\n      if (huggingFaceToken) {\r\n        headers['Authorization'] = `Bearer ${huggingFaceToken}`;\r\n      }\r\n\r\n      // The Hugging Face Inference API expects the image as base64 string without data URI prefix\r\n      const base64Data = imageBase64.replace(/^data:image\\/\\w+;base64,/, '');\r\n\r\n      // Validate base64 data\r\n      if (!base64Data) {\r\n        setCaption('Invalid image data');\r\n        return;\r\n      }\r\n\r\n      // Log the request for debugging\r\n      console.log('Sending request to caption model:', {\r\n        url: captionModelUrl,\r\n        hasToken: !!huggingFaceToken,\r\n        imageDataLength: base64Data.length\r\n      });\r\n\r\n      // Try direct fetch first\r\n      let response = await fetch(captionModelUrl, {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify({ inputs: base64Data }),\r\n      });\r\n\r\n      // Log the response status for debugging\r\n      console.log('Caption API response status:', response.status);\r\n      \r\n      // If we get a CORS error or network error, try a different approach\r\n      if (response.status === 0) {\r\n        console.warn('Possible CORS or network issue detected. Trying alternative approach...');\r\n        setCaption('CORS/network issue. Check console for details.');\r\n        return;\r\n      }\r\n      \r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('Caption API error:', {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          error: errorText,\r\n          url: captionModelUrl\r\n        });\r\n        \r\n        // Handle specific error cases\r\n        if (response.status === 400) {\r\n          setCaption('Invalid request. Check model URL.');\r\n        } else if (response.status === 401) {\r\n          setCaption('Unauthorized. Check API token.');\r\n        } else if (response.status === 403) {\r\n          setCaption('Access denied. Check API token permissions.');\r\n        } else if (response.status === 404) {\r\n          setCaption('Model not found. Check model URL.');\r\n        } else if (response.status === 429) {\r\n          setCaption('Rate limit exceeded. Try again later.');\r\n        } else if (response.status >= 500) {\r\n          setCaption('Server error. Try again later.');\r\n        } else {\r\n          setCaption(`Failed to get caption: ${response.status} ${response.statusText}`);\r\n        }\r\n        return;\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      // Log the response data for debugging\r\n      console.log('Caption API response data:', data);\r\n\r\n      // Handle various response formats from Hugging Face models\r\n      let captionText = 'No caption available';\r\n      \r\n      if (typeof data === 'string') {\r\n        captionText = data;\r\n      } else if (Array.isArray(data)) {\r\n        // Handle array responses (most common)\r\n        if (data.length > 0) {\r\n          if (typeof data[0] === 'string') {\r\n            captionText = data[0];\r\n          } else if (data[0].generated_text) {\r\n            captionText = data[0].generated_text;\r\n          } else if (data[0].caption) {\r\n            captionText = data[0].caption;\r\n          } else if (typeof data[0] === 'object' && data[0] !== null) {\r\n            // Handle object in array\r\n            const obj = data[0];\r\n            if (obj.generated_text) {\r\n              captionText = obj.generated_text;\r\n            } else if (obj.caption) {\r\n              captionText = obj.caption;\r\n            } else {\r\n              captionText = 'No recognizable caption in response';\r\n            }\r\n          } else {\r\n            captionText = 'Unexpected response format';\r\n          }\r\n        }\r\n      } else if (typeof data === 'object' && data !== null) {\r\n        // Handle object responses\r\n        if (data.generated_text) {\r\n          captionText = data.generated_text;\r\n        } else if (data.caption) {\r\n          captionText = data.caption;\r\n        } else if (data[0] && data[0].generated_text) {\r\n          captionText = data[0].generated_text;\r\n        } else if (data[0] && data[0].caption) {\r\n          captionText = data[0].caption;\r\n        } else {\r\n          captionText = 'Unexpected response format';\r\n        }\r\n      } else {\r\n        captionText = 'Unexpected response type';\r\n      }\r\n\r\n      setCaption(captionText);\r\n    } catch (error) {\r\n      console.error('Error fetching caption:', error);\r\n      \r\n      // Handle specific error types\r\n      if (error instanceof TypeError && error.message.includes('fetch')) {\r\n        setCaption('Network error. Check your connection.');\r\n      } else if (error instanceof TypeError && error.message.includes('Failed to fetch')) {\r\n        setCaption('CORS error or network issue.');\r\n      } else {\r\n        setCaption(`Error fetching caption: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Only fetch caption when captions are enabled, magnifier is shown, and we have valid coordinates\r\n    if (showCaptions && magnifierX > 0 && magnifierY > 0 && magnifierWidth > 0 && magnifierHeight > 0) {\r\n      const imageBase64 = getCroppedImageBase64();\r\n      if (imageBase64) {\r\n        fetchCaption(imageBase64);\r\n      } else {\r\n        setCaption('Unable to process image');\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [magnifierX, magnifierY, magnifierWidth, magnifierHeight, zoomLevel, captionModelUrl, showCaptions]);\r\n\r\n  return (\r\n    <div style={style}>\r\n      {caption}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReactImageMagnifyAICaption;\r\n","import React, { CSSProperties, FC } from 'react';\r\nimport { MagnifierShape, getBorderRadius } from './ReactImageMagnifyUtils';\r\nimport ReactImageMagnifyAICaption from './ReactImageMagnifyAICaption';\r\n\r\ninterface MagnifierDisplayProps {\r\n  showMagnifier: boolean;\r\n  isFullScreen: boolean;\r\n  magnifierHeight: number;\r\n  magnifierWidth: number;\r\n  magnifierX: number;\r\n  magnifierY: number;\r\n  zoomLevel: number;\r\n  smallImageSrc: string;\r\n  largeImageSrc?: string;\r\n  alt: string;\r\n  magnifierShape: MagnifierShape;\r\n  showCaptions?: boolean;\r\n  captionModelUrl?: string;\r\n  imgRef?: React.RefObject<HTMLImageElement | null>;\r\n}\r\n\r\nconst ReactImageMagnifyDisplay: React.FC<MagnifierDisplayProps> = ({\r\n  showMagnifier,\r\n  isFullScreen,\r\n  magnifierHeight,\r\n  magnifierWidth,\r\n  magnifierX,\r\n  magnifierY,\r\n  zoomLevel,\r\n  smallImageSrc,\r\n  largeImageSrc,\r\n  alt,\r\n  magnifierShape,\r\n  showCaptions = false,\r\n  captionModelUrl,\r\n  imgRef,\r\n}) => {\r\n  const backgroundImage = largeImageSrc && !isFullScreen ? largeImageSrc : smallImageSrc;\r\n\r\n  return (\r\n    <>\r\n      {showMagnifier && !isFullScreen && (\r\n        <>\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              pointerEvents: 'none',\r\n              height: magnifierHeight,\r\n              width: magnifierWidth,\r\n              top: magnifierY - magnifierHeight / 2,\r\n              left: magnifierX - magnifierWidth / 2,\r\n              borderRadius: getBorderRadius(magnifierShape),\r\n              boxShadow: '0 0 0 1px rgba(0,0,0,0.2)',\r\n              backgroundColor: 'white',\r\n              backgroundImage: `url('${backgroundImage}')`,\r\n              backgroundRepeat: 'no-repeat',\r\n              backgroundSize: (zoomLevel && magnifierX && magnifierY) ? `calc(100% * ${zoomLevel}) calc(100% * ${zoomLevel})` : 'auto',\r\n              backgroundPositionX: `-${magnifierX * zoomLevel - magnifierWidth / 2}px`,\r\n              backgroundPositionY: `-${magnifierY * zoomLevel - magnifierHeight / 2}px`,\r\n              border: '1px solid #ccc',\r\n              zIndex: 9999,\r\n            }}\r\n          />\r\n          {showCaptions && imgRef && (\r\n            <ReactImageMagnifyAICaption\r\n              imgRef={imgRef}\r\n              magnifierX={magnifierX}\r\n              magnifierY={magnifierY}\r\n              magnifierWidth={magnifierWidth}\r\n              magnifierHeight={magnifierHeight}\r\n              zoomLevel={zoomLevel}\r\n              captionModelUrl={captionModelUrl}\r\n              showCaptions={showCaptions}\r\n              style={{\r\n                position: 'absolute',\r\n                top: magnifierY + magnifierHeight / 2 + 5,\r\n                left: magnifierX - magnifierWidth / 2,\r\n                width: magnifierWidth,\r\n                backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n                color: '#333',\r\n                fontSize: '0.9rem',\r\n                padding: '4px 8px',\r\n                borderRadius: '4px',\r\n                boxShadow: '0 0 4px rgba(0,0,0,0.2)',\r\n                zIndex: 10000,\r\n                pointerEvents: 'none',\r\n                textAlign: 'center',\r\n              }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n      {isFullScreen && (\r\n        <img\r\n          src={smallImageSrc}\r\n          alt={alt}\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            objectFit: 'contain',\r\n            zIndex: 10000,\r\n            cursor: 'none',\r\n            backgroundColor: 'black',\r\n          }}\r\n          onClick={() => {\r\n            // Fullscreen exit handled in parent component\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ReactImageMagnifyDisplay;\r\n","import React, { useState, useEffect, useRef, CSSProperties, FC, MouseEvent, WheelEvent, TouchEvent } from 'react';\r\nimport {\r\n  handleContextMenu,\r\n  handleRightClick,\r\n  handleMouseMove,\r\n  handleMouseLeave,\r\n  handleDoubleClick,\r\n  handleWheel,\r\n  handleTouchStart,\r\n  handleTouchMove,\r\n  handleTouchEnd,\r\n  handleTouchTap,\r\n} from './ReactImageMagnifyEventHandlers';\r\nimport ReactImageMagnifyDisplay from './ReactImageMagnifyDisplay';\r\nimport { MagnifierShape } from './ReactImageMagnifyUtils';\r\n\r\ninterface ReactImageMagnifyProps {\r\n  smallImageSrc: string;\r\n  largeImageSrc?: string;\r\n  magnifierHeight?: number;\r\n  magnifierWidth?: number;\r\n  zoomLevel?: number;\r\n  alt?: string;\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  showCaptions?: boolean;\r\n  captionModelUrl?: string;\r\n}\r\n\r\nconst ReactImageMagnify: FC<ReactImageMagnifyProps> = (props) => {\r\n  const {\r\n    smallImageSrc,\r\n    largeImageSrc,\r\n    magnifierHeight = 250,\r\n    magnifierWidth = 250,\r\n    zoomLevel: initialZoomLevel = 2,\r\n    alt = '',\r\n    className,\r\n    style,\r\n    showCaptions = false,\r\n    captionModelUrl,\r\n  } = props;\r\n\r\n  const [showMagnifier, setShowMagnifier] = useState(false);\r\n  const [magnifierX, setMagnifierX] = useState(0);\r\n  const [magnifierY, setMagnifierY] = useState(0);\r\n  const [zoomLevel, setZoomLevel] = useState(initialZoomLevel);\r\n  const [zoomMode, setZoomMode] = useState(false);\r\n  const [magnifierShape, setMagnifierShape] = useState<MagnifierShape>('circle');\r\n  const [largeImageLoaded, setLargeImageLoaded] = useState(false);\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n\r\n  const imgRef = useRef<HTMLImageElement | null>(null);\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const lastTouchDistance = useRef<number | null>(null);\r\n  const lastRightClickTime = useRef<number>(0);\r\n  const lastTap = useRef<number>(0);\r\n\r\n  const toggleFullScreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      if (containerRef.current) {\r\n        containerRef.current.requestFullscreen().then(() => {\r\n          setIsFullScreen(true);\r\n        }).catch((err) => {\r\n          console.error('Error attempting to enable full-screen mode:', err);\r\n        });\r\n      }\r\n    } else {\r\n      document.exitFullscreen().then(() => {\r\n        setIsFullScreen(false);\r\n      }).catch((err) => {\r\n        console.error('Error attempting to exit full-screen mode:', err);\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const onFullScreenChange = () => {\r\n      if (!document.fullscreenElement) {\r\n        setIsFullScreen(false);\r\n      }\r\n    };\r\n    document.addEventListener('fullscreenchange', onFullScreenChange);\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', onFullScreenChange);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if ((showMagnifier || zoomMode) && largeImageSrc && !largeImageLoaded) {\r\n      const img = new Image();\r\n      img.src = largeImageSrc;\r\n      img.onload = () => setLargeImageLoaded(true);\r\n    }\r\n  }, [showMagnifier, zoomMode, largeImageSrc, largeImageLoaded]);\r\n\r\n  return (\r\n    <div\r\n      data-testid=\"react-image-magnify\"\r\n      ref={containerRef}\r\n      style={{ position: 'relative', display: 'inline-block', cursor: isFullScreen ? 'none' : undefined, ...style }}\r\n      className={className}\r\n      onMouseMove={(e) =>\r\n        handleMouseMove(e, {\r\n          imgRef,\r\n          isFullScreen,\r\n          zoomMode,\r\n          setShowMagnifier,\r\n          setMagnifierX,\r\n          setMagnifierY,\r\n          setZoomLevel,\r\n          setZoomMode,\r\n          setMagnifierShape,\r\n          magnifierShape,\r\n          initialZoomLevel,\r\n          lastTouchDistance,\r\n          lastRightClickTime,\r\n          lastTap,\r\n          toggleFullScreen,\r\n          containerRef,\r\n        })\r\n      }\r\n      onMouseLeave={() =>\r\n        handleMouseLeave({\r\n          zoomMode,\r\n          setShowMagnifier,\r\n          isFullScreen,\r\n          setMagnifierX,\r\n          setMagnifierY,\r\n          setZoomLevel,\r\n          setZoomMode,\r\n          setMagnifierShape,\r\n          magnifierShape,\r\n          initialZoomLevel,\r\n          lastTouchDistance,\r\n          lastRightClickTime,\r\n          lastTap,\r\n          toggleFullScreen,\r\n          imgRef,\r\n          containerRef,\r\n        })\r\n      }\r\n      onDoubleClick={(e) =>\r\n        handleDoubleClick(e, {\r\n          imgRef,\r\n          isFullScreen,\r\n          zoomMode,\r\n          setShowMagnifier,\r\n          setMagnifierX,\r\n          setMagnifierY,\r\n          setZoomLevel,\r\n          setZoomMode,\r\n          setMagnifierShape,\r\n          magnifierShape,\r\n          initialZoomLevel,\r\n          lastTouchDistance,\r\n          lastRightClickTime,\r\n          lastTap,\r\n          toggleFullScreen,\r\n          containerRef,\r\n        })\r\n      }\r\n      onWheel={(e) =>\r\n        handleWheel(e, {\r\n          zoomMode,\r\n          isFullScreen,\r\n          setZoomLevel,\r\n          setShowMagnifier,\r\n          setMagnifierX,\r\n          setMagnifierY,\r\n          setZoomMode,\r\n          setMagnifierShape,\r\n          magnifierShape,\r\n          initialZoomLevel,\r\n          lastTouchDistance,\r\n          lastRightClickTime,\r\n          lastTap,\r\n          toggleFullScreen,\r\n          imgRef,\r\n          containerRef,\r\n        })\r\n      }\r\n      onContextMenu={(e) => handleContextMenu(e, setMagnifierShape)}\r\n      onMouseDown={(e) => handleRightClick(e, imgRef, lastRightClickTime, toggleFullScreen)}\r\n      onTouchStart={(e) => {\r\n        handleTouchStart(e, lastTouchDistance);\r\n        handleTouchTap(e, {\r\n          imgRef,\r\n          isFullScreen,\r\n          zoomMode,\r\n          setShowMagnifier,\r\n          setMagnifierX,\r\n          setMagnifierY,\r\n          setZoomLevel,\r\n          setZoomMode,\r\n          setMagnifierShape,\r\n          magnifierShape,\r\n          initialZoomLevel,\r\n          lastTouchDistance,\r\n          lastRightClickTime,\r\n          lastTap,\r\n          toggleFullScreen,\r\n          containerRef,\r\n        });\r\n      }}\r\n      onTouchMove={(e) =>\r\n        handleTouchMove(e, {\r\n          imgRef,\r\n          isFullScreen,\r\n          zoomMode,\r\n          setShowMagnifier,\r\n          setMagnifierX,\r\n          setMagnifierY,\r\n          setZoomLevel,\r\n          setZoomMode,\r\n          setMagnifierShape,\r\n          magnifierShape,\r\n          initialZoomLevel,\r\n          lastTouchDistance,\r\n          lastRightClickTime,\r\n          lastTap,\r\n          toggleFullScreen,\r\n          containerRef,\r\n        })\r\n      }\r\n      onTouchEnd={(e) => handleTouchEnd(e, lastTouchDistance)}\r\n    >\r\n      <img\r\n        src={smallImageSrc}\r\n        alt={alt}\r\n        ref={imgRef}\r\n        style={{ display: 'block', width: '100%', height: 'auto', cursor: zoomMode ? 'zoom-out' : 'zoom-in' }}\r\n      />\r\n      <ReactImageMagnifyDisplay\r\n        showMagnifier={showMagnifier}\r\n        isFullScreen={isFullScreen}\r\n        magnifierHeight={magnifierHeight}\r\n        magnifierWidth={magnifierWidth}\r\n        magnifierX={magnifierX}\r\n        magnifierY={magnifierY}\r\n        zoomLevel={zoomLevel}\r\n        smallImageSrc={smallImageSrc}\r\n        largeImageSrc={largeImageSrc}\r\n        alt={alt}\r\n        magnifierShape={magnifierShape}\r\n        showCaptions={showCaptions}\r\n        captionModelUrl={captionModelUrl}\r\n        imgRef={imgRef}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReactImageMagnify;\r\n","import * as React from 'react';\r\n\r\ninterface ReactImageMagnifyProps {\r\n  smallImageSrc: string;\r\n  largeImageSrc?: string;\r\n  magnifierHeight?: number;\r\n  magnifierWidth?: number;\r\n  zoomLevel?: number;\r\n  alt?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nconst ReactImageMagnifier: React.FC<ReactImageMagnifyProps> = (props) => {\r\n  const {\r\n    smallImageSrc,\r\n    largeImageSrc,\r\n    magnifierHeight = 250,\r\n    magnifierWidth = 250,\r\n    zoomLevel: initialZoomLevel = 2,\r\n    alt = '',\r\n    className,\r\n    style,\r\n  } = props;\r\n\r\n  const [showMagnifier, setShowMagnifier] = React.useState(false);\r\n  const [magnifierX, setMagnifierX] = React.useState(0);\r\n  const [magnifierY, setMagnifierY] = React.useState(0);\r\n  const [zoomLevel, setZoomLevel] = React.useState(initialZoomLevel);\r\n  const [zoomMode, setZoomMode] = React.useState(false);\r\n\r\n  const imgRef = React.useRef<HTMLImageElement | null>(null);\r\n\r\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    if (!imgRef.current) return;\r\n\r\n    const { top, left, width, height } = imgRef.current.getBoundingClientRect();\r\n\r\n    const x = e.clientX - left;\r\n    const y = e.clientY - top;\r\n\r\n    if (x < 0 || y < 0 || x > width || y > height) {\r\n      if (!zoomMode) {\r\n        setShowMagnifier(false);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!zoomMode) {\r\n      setShowMagnifier(true);\r\n    }\r\n\r\n    setMagnifierX(x);\r\n    setMagnifierY(y);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    if (!zoomMode) {\r\n      setShowMagnifier(false);\r\n    }\r\n  };\r\n\r\n  const handleDoubleClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    setZoomMode((prev) => {\r\n      const newZoomMode = !prev;\r\n      if (!newZoomMode) {\r\n        setShowMagnifier(false);\r\n        setZoomLevel(initialZoomLevel);\r\n      } else {\r\n        if (imgRef.current) {\r\n          const { top, left } = imgRef.current.getBoundingClientRect();\r\n          const x = e.clientX - left;\r\n          const y = e.clientY - top;\r\n          setMagnifierX(x);\r\n          setMagnifierY(y);\r\n          setShowMagnifier(true);\r\n        }\r\n      }\r\n      return newZoomMode;\r\n    });\r\n  };\r\n\r\n  const handleWheel = (e: React.WheelEvent<HTMLDivElement>) => {\r\n    if (!zoomMode) return;\r\n\r\n    e.preventDefault();\r\n    const delta = -e.deltaY || e.detail || (e as any).wheelDelta;\r\n    setZoomLevel((prev) => {\r\n      let newZoom = prev + (delta > 0 ? 0.1 : -0.1);\r\n      if (newZoom < 1) newZoom = 1;\r\n      if (newZoom > 5) newZoom = 5;\r\n      return newZoom;\r\n    });\r\n  };\r\n\r\n  const backgroundImage = largeImageSrc || smallImageSrc;\r\n\r\n  return (\r\n    <div\r\n      style={{ position: 'relative', display: 'inline-block', ...style }}\r\n      className={className}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseLeave={handleMouseLeave}\r\n      onDoubleClick={handleDoubleClick}\r\n      onWheel={handleWheel}\r\n    >\r\n      <img\r\n        src={smallImageSrc}\r\n        alt={alt}\r\n        ref={imgRef}\r\n        style={{ display: 'block', width: '100%', height: 'auto', cursor: zoomMode ? 'zoom-out' : 'zoom-in' }}\r\n      />\r\n      {showMagnifier && (\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            height: magnifierHeight,\r\n            width: magnifierWidth,\r\n            top: magnifierY - magnifierHeight / 2,\r\n            left: magnifierX - magnifierWidth / 2,\r\n            borderRadius: '50%',\r\n            boxShadow: '0 0 0 1px rgba(0,0,0,0.2)',\r\n            backgroundColor: 'white',\r\n            backgroundImage: `url('${backgroundImage}')`,\r\n            backgroundRepeat: 'no-repeat',\r\n            backgroundSize: `${imgRef.current?.width! * zoomLevel}px ${\r\n              imgRef.current?.height! * zoomLevel\r\n            }px`,\r\n            backgroundPositionX: `-${magnifierX * zoomLevel - magnifierWidth / 2}px`,\r\n            backgroundPositionY: `-${magnifierY * zoomLevel - magnifierHeight / 2}px`,\r\n            border: '1px solid #ccc',\r\n            zIndex: 9999,\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReactImageMagnifier;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport ReactImageMagnify from './ReactImageMagnify';\r\n\r\nconst ReactImageMagnifyAITest: React.FC = () => {\r\n  return (\r\n    <div style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }}>\r\n      <h1>ReactImageMagnify AI Captioning Test</h1>\r\n      <p>Hover over the image below to see the AI-generated caption for the magnified portion.</p>\r\n      \r\n      <div style={{ marginTop: '20px' }}>\r\n        <ReactImageMagnify\r\n          smallImageSrc=\"https://images.unsplash.com/photo-1500964757620-d4f749d289e4?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80\"\r\n          largeImageSrc=\"https://images.unsplash.com/photo-1500964757620-d4f749d289e4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80\"\r\n          magnifierHeight={300}\r\n          magnifierWidth={300}\r\n          zoomLevel={2}\r\n          alt=\"Mountain landscape\"\r\n          showCaptions={true}\r\n          captionModelUrl=\"https://api-inference.huggingface.co/models/Salesforce/blip-image-captioning-base\"\r\n          style={{ border: '1px solid #ccc', borderRadius: '4px' }}\r\n        />\r\n      </div>\r\n      \r\n      <div style={{ marginTop: '20px', padding: '10px', backgroundColor: '#f5f5f5', borderRadius: '4px' }}>\r\n        <h2>How to Test AI Captioning</h2>\r\n        <ol>\r\n          <li>Hover your mouse over the image above</li>\r\n          <li>Move your mouse to different parts of the image</li>\r\n          <li>Observe the caption that appears below the magnifier</li>\r\n          <li>The caption should describe the content of the magnified area</li>\r\n        </ol>\r\n        \r\n        <h3>Troubleshooting</h3>\r\n        <ul>\r\n          <li>If you see \"Loading caption...\" for more than a few seconds, check your internet connection</li>\r\n          <li>If you see \"Failed to get caption\", verify the model URL is correct</li>\r\n          <li>Check the browser console for detailed error messages</li>\r\n          <li>For production use, add your Hugging Face API token</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReactImageMagnifyAITest;\r\n"],"names":["React","require$$0","jsxRuntimeModule","require$$1","useState","useEffect","_jsx","_jsxs","_Fragment","useRef"],"mappings":"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","x_google_ignoreList":[0,1,2]}